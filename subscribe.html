<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Rounds Calendar</title>

<link rel="alternate" hreflang="en" href="/en">
<link rel="alternate" hreflang="fr" href="/fr">
<link rel="alternate" hreflang="x-default" href="/en">

<style>
:root{
  --bg:#F1F5F9;
  --card:#FFFFFF;
  --ink:#020617;
  --muted:#475569;
  --soft:#CBD5E1;
  --accent:#5B21B6;
  --accent-soft:#F3E8FF;
}

html,body{
  margin:0;
  background:var(--bg);
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif;
  color:var(--ink);
}

.wrapper{
  max-width:940px;
  margin:0 auto;
  padding:clamp(36px,6vw,84px) 18px;
}

.card{
  position:relative;
  background:var(--card);
  padding:clamp(32px,4.5vw,72px);
  border-radius:18px;
  box-shadow:
    0 1px 0 rgba(2,6,23,.05),
    0 24px 60px rgba(2,6,23,.08);
}

/* LANGUAGE */

.lang-toggle{
  position:absolute;
  top:18px;
  right:20px;
  display:flex;
  gap:6px;
}

.lang-toggle a{
  font-size:12px;
  border:1px solid var(--soft);
  background:#fff;
  color:var(--muted);
  padding:5px 10px;
  border-radius:999px;
  text-decoration:none;
}

.lang-toggle a.active{
  color:var(--accent);
  border-color:var(--accent);
  background:var(--accent-soft);
}

/* TYPE */

h1{
  font-family:Georgia,Times,serif;
  font-size:clamp(28px,3.2vw,36px);
  line-height:1.2;
  margin:0 0 16px;
}

.lede{
  font-size:17px;
  line-height:1.75;
  color:var(--muted);
  max-width:62ch;
  margin:0 0 36px;
}

p{font-size:15px;line-height:1.7;margin:0 0 16px}
small{font-size:12px;color:var(--muted)}

.calendar-wrap{
  display:flex;
  justify-content:center;
  margin:36px 0 18px;
}

.code{
  margin-top:14px;
  background:#F8FAFC;
  padding:16px 18px;
  border-radius:14px;
  font-family:ui-monospace,Menlo,monospace;
  font-size:13px;
  border:1px solid var(--soft);
  word-break:break-all;
}

hr{
  border:none;
  border-top:1px solid var(--soft);
  margin:52px 0;
}

.instructions{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
  gap:28px;
}

.section{
  padding-left:16px;
  border-left:3px solid var(--accent);
}

.section h2{
  font-size:11px;
  letter-spacing:.16em;
  text-transform:uppercase;
  color:var(--accent);
  margin:0 0 10px;
}

.footer-note{
  margin-top:40px;
  padding-top:20px;
  border-top:1px dashed var(--soft);
}

html[lang="fr"]{
  font-feature-settings:"kern","liga","clig";
}
</style>

<script src="https://cdn.jsdelivr.net/npm/add-to-calendar-button@2" async defer></script>
</head>

<body>
<div class="wrapper">
<div class="card">

<nav class="lang-toggle" aria-label="Language">
  <a href="/en" id="link-en">ðŸ‡¨ðŸ‡¦ EN</a>
  <a href="/fr" id="link-fr">ðŸ‡¨ðŸ‡¦ FR</a>
</nav>

<section data-lang="en">
  <h1>Subscribe to the Rounds Calendar</h1>
  <p class="lede">
    Upcoming Psychosocial, Academic, Cultural, and Clinical Rounds.
    Subscribing keeps sessions automatically updated across devices.
  </p>
</section>

<section data-lang="fr" hidden>
  <h1>Sâ€™abonner au calendrier des Rounds</h1>
  <p class="lede">
    SÃ©minaires psychosociaux, acadÃ©miques, culturels et cliniques Ã  venir.
    Lâ€™abonnement assure la mise Ã  jour automatique des sÃ©ances sur tous vos appareils.
  </p>
</section>

<div class="calendar-wrap">
  <add-to-calendar-button
    name="Rounds"
    timeZone="America/Toronto"
    icsFile="https://psychosocial-research-axis.github.io/rounds/calendars/rounds.ics"
    subscribe
    options="'Apple','Google','Yahoo','Microsoft365'"
    customLabels='{"ms365":"Office 365 / Outlook"}'>
  </add-to-calendar-button>
</div>

<section data-lang="en">
  <p><small>If the button doesnâ€™t open your calendar, use the link below.</small></p>
</section>

<section data-lang="fr" hidden>
  <p><small>Si le bouton ne sâ€™ouvre pas, utilisez le lien ci-dessous.</small></p>
</section>

<div class="code">
  webcal://psychosocial-research-axis.github.io/rounds/calendars/rounds.ics
</div>

<hr>

<section data-lang="en">
  <div class="instructions">
    <div class="section"><h2>Apple</h2><p>Paste the link into your browser and confirm the subscription.</p></div>
    <div class="section"><h2>Outlook</h2><p>Calendar â†’ Add calendar â†’ Subscribe from web.</p></div>
    <div class="section"><h2>Google</h2><p>Settings â†’ Add calendar â†’ From URL.</p></div>
    <div class="section"><h2>Android / Yahoo</h2><p>Subscribe by URL or calendar link.</p></div>
  </div>
</section>

<section data-lang="fr" hidden>
  <div class="instructions">
    <div class="section"><h2>Apple</h2><p>Collez le lien dans votre navigateur et confirmez lâ€™abonnement.</p></div>
    <div class="section"><h2>Outlook</h2><p>Calendrier â†’ Ajouter â†’ Sâ€™abonner Ã  partir du Web.</p></div>
    <div class="section"><h2>Google</h2><p>ParamÃ¨tres â†’ Ajouter â†’ Ã€ partir de lâ€™URL.</p></div>
    <div class="section"><h2>Android / Yahoo</h2><p>Sâ€™abonner par URL ou lien de calendrier.</p></div>
  </div>
</section>

<section data-lang="en">
  <div class="footer-note">
    <small>Imported calendars do not update automatically.</small>
  </div>
</section>

<section data-lang="fr" hidden>
  <div class="footer-note">
    <small>Les calendriers importÃ©s ne se mettent pas Ã  jour automatiquement.</small>
  </div>
</section>

</div>
</div>

<script>
const sections = document.querySelectorAll('[data-lang]');
const linkEn = document.getElementById('link-en');
const linkFr = document.getElementById('link-fr');

function setLang(lang, push=true){
  sections.forEach(s => s.hidden = s.dataset.lang !== lang);
  linkEn.classList.toggle('active', lang === 'en');
  linkFr.classList.toggle('active', lang === 'fr');
  document.documentElement.lang = lang;
  if (push) history.pushState({}, '', '/' + lang);
}

[linkEn, linkFr].forEach(link => {
  link.addEventListener('click', e => {
    e.preventDefault();
    setLang(link === linkFr ? 'fr' : 'en');
  });
});

const initialLang = location.pathname.startsWith('/fr') ? 'fr' : 'en';
setLang(initialLang, false);
</script>

</body>
</html>
